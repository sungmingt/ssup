# ssup

<br>

## ERD
https://dbdiagram.io/d/ssup-6930e8afd6676488ba811397


<br>

## 고민한 부분들
[매칭 시스템 도메인 설계 및 조회]

**문제**
 - 매치 시스템에서, 유저(User)는 '신청자' 또는 '수신자'이다.
 - 유저의 매치 기록이 요구사항에 포함되어 있었기 때문에 양방향 관계(user.getMatches()를 통해 조회)를 고려.
 - 하지만 User-Match-User의 관계는 순환참조, 도메인 간 복잡한 결합이 생길 위험이 있다.
 - User 조회 시, 유저의 매치 내역까지 영속성 컨텍스트에 불필요하게 로드되기 때문에, LazyInitializationException와 N+1 리스크가 생김.

**해결**
  - Match와 User 엔티티를 단방향 관계로 구현.
  - JPQL을 통해 연관관계의 주인인 Match를 통해 매치 내역을 포함한 모든 작업을 수행하도록 구현.

**결과**
  - 복잡한 양방향 매핑을 지양하고, 도메인 간 결합을 낮추면서도 요구사항을 충족
